<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Gestiune Spectacole | Admin</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" th:href="@{/css/home.css}">
    <style>
        .form-control:focus {
            border-color: #ff00ff;
            box-shadow: 0 0 0 0.25rem rgba(255, 0, 255, 0.25);
        }
        .text-magenta { color: #ff00ff !important; }
        .border-magenta { border-color: #ff00ff !important; }
        .btn-magenta { background-color: #ff00ff !important; color: white !important; }
        .img-preview {
            width: 80px;
            height: 50px;
            object-fit: cover;
            border-radius: 5px;
            border: 1px solid rgba(255, 0, 255, 0.5);
        }
    </style>
</head>
<body class="bg-black text-white p-5">

<div class="container">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2>Gestionare <span class="text-magenta">Spectacole</span></h2>
        <div>
            <a th:href="@{/admin}" class="btn btn-outline-light me-2">Dashboard</a>
            <a th:href="@{/home}" class="btn btn-outline-magenta text-magenta">Vezi Site</a>
        </div>
    </div>

    <div class="card bg-dark text-white p-4 mb-5 border-magenta">
        <h4 class="mb-4 text-magenta">Adaugă Spectacol Nou</h4>
        <form th:action="@{/admin/spectacole/salveaza}" method="post" class="row g-3">
            <div class="col-md-4">
                <label class="form-label small text-white-50">Titlu</label>
                <input type="text" name="titlu" class="form-control bg-dark text-white border-secondary" placeholder="Titlu Spectacol" required>
            </div>
            <div class="col-md-3">
                <label class="form-label small text-white-50">Data</label>
                <input type="date" name="data" class="form-control bg-dark text-white border-secondary" required>
            </div>
            <div class="col-md-2">
                <label class="form-label small text-white-50">Nr. Bilete</label>
                <input type="number" name="bilete" class="form-control bg-dark text-white border-secondary" placeholder="Ex: 100">
            </div>
            <div class="col-md-3">
                <label class="form-label small text-white-50">Preț (RON)</label>
                <input type="number" name="pret" class="form-control bg-dark text-white border-secondary" placeholder="Ex: 50">
            </div>

            <div class="col-md-10">
                <label class="form-label small text-white-50">URL Imagine Poster (Link direct către imagine)</label>
                <input type="text" name="urlPoza" class="form-control bg-dark text-white border-secondary"
                       placeholder="https://exemplu.com/afis-show.jpg" required>
            </div>

            <div class="col-md-2 d-flex align-items-end">
                <button type="submit" class="btn btn-magenta w-100 fw-bold">ADĂUGĂ</button>
            </div>
        </form>
    </div>

    <div class="d-flex justify-content-end gap-2 mb-3">
        <span class="small text-white-50 align-self-center">Sortează după:</span>
        <a th:href="@{/admin/spectacole(sort='pret')}" class="btn btn-outline-light btn-sm">Preț</a>
        <a th:href="@{/admin/spectacole(sort='data')}" class="btn btn-outline-light btn-sm">Data</a>
        <a th:href="@{/admin/spectacole}" class="btn btn-outline-secondary btn-sm">Reset</a>
    </div>

    <div class="table-responsive">
        <table class="table table-dark table-hover border-magenta align-middle">
            <thead class="table-magenta text-white">
            <tr>
                <th>Poster</th> <th>ID</th>
                <th>Titlu</th>
                <th>Data</th>
                <th>Bilete</th>
                <th>Preț</th>
                <th class="text-center">Acțiuni</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="s : ${lista}">
                <td>
                    <img th:src="${s.imagineUrl != null && s.imagineUrl != '' ? s.imagineUrl : 'https://via.placeholder.com/80x50?text=Fara+Foto'}"
                         class="img-preview" alt="Poster">
                </td>
                <td th:text="${s.showID}"></td>
                <td th:text="${s.titlu}" class="fw-bold text-magenta"></td>
                <td th:text="${s.data}"></td>
                <td th:text="${s.nrBilete}"></td>
                <td th:text="${s.pret} + ' RON'"></td>
                <td class="text-center">
                    <a th:href="@{/admin/spectacole/sterge/{id}(id=${s.showID})}"
                       class="btn btn-outline-danger btn-sm"
                       onclick="return confirm('Ești sigur că vrei să ștergi acest spectacol?')">
                        Șterge
                    </a>
                </td>
            </tr>
            </tbody>
        </table>
    </div>
</div>

</body>
</html>